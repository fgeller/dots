* Email

  Set the environment.

  #+begin_src emacs-lisp
    (setq
     mail-envelope-from 'header
     mail-from-style 'angles
     mail-host-address "Ernie"
     mail-specify-envelope-from t
     message-kill-buffer-on-exit t
     message-send-mail-partially-limit nil
     message-sendmail-envelope-from 'header
     message-signature "Felix Geller"
     send-mail-function 'sendmail-send-it
     user-full-name "Felix Geller"
     user-mail-address "fgeller@gmail.com"
    )
  #+end_src

  Sign outgoing mail

  #+begin_src emacs-lisp
    (add-hook 'message-setup-hook 'mml-secure-message-sign-pgpmime)
  #+end_src

  #+begin_src emacs-lisp
    (use-package notmuch
      :ensure notmuch
      :init (add-hook 'notmuch-show-hook (lambda () (setq show-trailing-whitespace nil)))
      :config
      (setq notmuch-fcc-dirs nil
            notmuch-crypto-process-mime t
            notmuch-show-indent-messages-width 0
            notmuch-saved-searches '((:name "in" :query "tag:inbox" :key "i")
                                     (:name "flagged" :query "tag:flagged" :key "f")
                                     (:name "sent" :query "tag:sent" :key "t")
                                     (:name "drafts" :query "tag:draft" :key "d"))
            notmuch-hello-sections '(notmuch-hello-insert-saved-searches
                                     notmuch-hello-insert-search
                                     notmuch-hello-insert-recent-searches
                                     notmuch-hello-insert-alltags))
      (use-package org-notmuch))
  #+end_src

  Explicitly load gpg-agent information (for osx).

  #+begin_src emacs-lisp
    (exec-path-from-shell-copy-env "GPG_AGENT_INFO")
  #+end_src
