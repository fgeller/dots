* Helm

  #+begin_src emacs-lisp
    (use-package helm-config :config (helm-mode 1))
    (use-package helm-ls-git)
    (use-package helm-org)
  #+end_src

  Monkey-patch helm-ls-git for not git-controlled buffers.

  #+begin_src emacs-lisp
    (defun helm-ls-git-init ()
      (let ((git-root (helm-ls-git-root-dir)))
        (when git-root
          (let ((data (cl-loop for c in (split-string (helm-ls-git-list-files) "\n" t)
                               collect (expand-file-name c git-root))))
            (when (null data)
              (setq data
                    (if helm-ls-git-log-file
                        (with-current-buffer
                            (find-file-noselect helm-ls-git-log-file)
                          (prog1
                              (buffer-substring-no-properties
                               (point-min) (point-max))
                            (kill-buffer)))
                      data)))
            (helm-init-candidates-in-buffer 'global data)))))
  #+end_src

  Collection of sources that we want fast access to.

  #+begin_src emacs-lisp
    (defun helm-jump ()
      (interactive)
      (unless helm-source-buffers-list
        (setq helm-source-buffers-list
              (helm-make-source "Buffers" 'helm-source-buffers)))
      (helm :sources `(
                       helm-source-buffers-list
                       ,(helm-make-source "Git files" 'helm-ls-git-source)
                       helm-source-recentf
                       helm-source-files-in-current-dir
                       helm-source-buffer-not-found
                       ,(helm-source-org-headings-for-files (org-agenda-files))
                       )))
  #+end_src

  Quick, quiiiiick!

  #+begin_src emacs-lisp
    (setq helm-idle-delay 0.01)
    (setq helm-input-idle-delay 0.01)
  #+end_src

  Don't fill in single matches when selecting files.

  #+begin_src emacs-lisp
    (setq helm-ff-auto-update-initial-value nil)
  #+end_src

  Show the full path to files.

  #+begin_src emacs-lisp
    (setq helm-ff-transformer-show-only-basename nil)
  #+end_src

  Longer names are ok.

  #+begin_src emacs-lisp
    (setq helm-buffer-max-length 40)
  #+end_src

  Remember follow-mode setting across helm sessions.

  #+begin_src emacs-lisp
    (setq helm-follow-mode-persistent t)
  #+end_src

  Truncate long-lines.

  #+begin_src emacs-lisp
    (setq helm-truncate-lines t)
  #+end_src

